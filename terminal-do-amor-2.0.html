<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Terminal do Amor 2.0 - Saudade.exe</title>
<style>
  body {
    background-color: #0a0a0a;
    color: #00ff9f;
    font-family: "Courier New", monospace;
    font-size: 18px;
    padding: 20px;
    overflow: hidden;
  }

  #terminal {
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  #terminal::after {
    content: "_";
    animation: blink 1s step-start infinite;
  }

  @keyframes blink {
    50% { opacity: 0; }
  }

  .hearts {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: hidden;
    display: none;
  }

  .heart {
    position: absolute;
    color: #ff4da6;
    animation: floatUp 5s linear infinite;
    font-size: 20px;
    text-shadow: 0 0 5px #ff4da6;
  }

  @keyframes floatUp {
    0% { transform: translateY(100vh) scale(0.8); opacity: 1; }
    100% { transform: translateY(-10vh) scale(1.5); opacity: 0; }
  }

  .error {
    color: #ff0000;
    font-weight: bold;
  }

  .success {
    color: #00ff9f;
  }

  /* Input invis√≠vel */
  #userInput {
    position: absolute;
    top: -100px;
    left: -100px;
    opacity: 0;
  }
</style>
</head>
<body>
<div id="terminal">&gt; Digite a palavra secreta:</div>
<div class="hearts" id="hearts"></div>
<input type="text" id="userInput" autofocus>

<!-- Sons -->
<audio id="boot" preload="auto">
  <source src="https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg" type="audio/ogg">
</audio>

<audio id="bip" preload="auto">
  <source src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg" type="audio/ogg">
</audio>

<script>
const terminal = document.getElementById('terminal');
const heartsContainer = document.getElementById('hearts');
const bip = document.getElementById('bip');
const boot = document.getElementById('boot');
const inputField = document.getElementById('userInput');

let input = "";
const commandHistory = [];
let historyIndex = -1;

inputField.addEventListener('input', () => {
    input = inputField.value;
});

inputField.addEventListener('keydown', (e) => {
    if (e.key === 'Enter') {
        if (input.trim() !== "") {
            commandHistory.push(input);
            historyIndex = -1;
            processCommand();
            input = "";
            inputField.value = "";
        }
        e.preventDefault();
    } else if (e.key === 'ArrowUp') {
        if (commandHistory.length > 0 && historyIndex < commandHistory.length -1) {
            historyIndex++;
            input = commandHistory[commandHistory.length - 1 - historyIndex];
            inputField.value = input;
        }
        e.preventDefault();
    } else if (e.key === 'ArrowDown') {
        if (historyIndex > 0) {
            historyIndex--;
            input = commandHistory[commandHistory.length - 1 - historyIndex];
            inputField.value = input;
        } else {
            historyIndex = -1;
            input = "";
            inputField.value = "";
        }
        e.preventDefault();
    }
});

function processCommand() {
  const command = input.toLowerCase();
  terminal.innerHTML += `\n> ${input}`;

  if (command === "saudades") {
    boot.play();
    setTimeout(() => {
      typeLines([
        "<span class='success'>> Analisando entrada...</span>",
        "<span class='success'>> Palavra secreta reconhecida.</span>",
        "<span class='success'>> Iniciando transmiss√£o emocional...</span>",
        "<span class='success'>> ‚ù§Ô∏èüíª Conex√£o emocional restabelecida üíñ</span>",
        "<span class='success'>> Sistema confirma: saudades detectadas dos dois lados.</span>"
      ]);
      startHearts();
      setTimeout(() => bip.play(), 2500);
    }, 1000);
  } else if (command === "abra√ßo") {
      typeLines([
          "<span class='success'>> Processando solicita√ß√£o...</span>",
          "<span class='success'>> Transmitindo um abra√ßo virtual.</span>",
          "<span class='success'>> ü§ó Abra√ßo enviado com sucesso! ü§ó</span>"
      ]);
  } else if (command === "beijo") {
      typeLines([
          "<span class='success'>> Iniciando protocolo beijo...</span>",
          "<span class='success'>> Enviando um beijo carregado de carinho.</span>",
          "<span class='success'>> üíã Beijo recebido? üíã</span>"
      ]);
  } else if (command === "limpar" || command === "clear") {
      terminal.innerHTML = "&gt; Digite a palavra secreta:";
  } else if (command === "ajuda" || command === "help") {
      typeLines([
          "> Comandos dispon√≠veis:",
          "> 'saudades' - Conecta emocionalmente.",
          "> 'abra√ßo' - Envia um abra√ßo virtual.",
          "> 'beijo' - Envia um beijo virtual.",
          "> 'limpar' ou 'clear' - Limpa a tela.",
          "> 'ajuda' ou 'help' - Exibe esta mensagem."
      ]);
  }
  else {
    terminal.innerHTML += `\n<span class="error">> Comando '${input}' n√£o reconhecido. Digite 'ajuda' para ver a lista de comandos.</span>`;
  }
}

function typeLines(lines) {
  let i = 0;
  function nextLine() {
    if (i < lines.length) {
      setTimeout(() => {
        terminal.innerHTML += "\n" + lines[i];
        window.scrollTo(0, document.body.scrollHeight);
        i++;
        nextLine();
      }, 200);
    }
  }
  nextLine();
}

function startHearts() {
  heartsContainer.style.display = 'block';
  heartsContainer.innerHTML = '';
  for (let i = 0; i < 50; i++) {
    const heart = document.createElement('div');
    heart.classList.add('heart');
    heart.style.left = Math.random() * 100 + 'vw';
    heart.style.animationDelay = Math.random() * 8 + 's';
    heart.style.animationDuration = Math.random() * 4 + 3 + 's';
    heart.innerHTML = 'üíñ';
    heartsContainer.appendChild(heart);
  }
}
</script>
</body>
</html>
